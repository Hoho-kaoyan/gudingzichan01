# 固定资产管理系统 - 功能测试文档

## 文档信息

| 项目 | 内容 |
|------|------|
| **文档名称** | 固定资产管理系统功能测试文档 |
| **文档版本** | 1.0 |
| **编写日期** | 2025年 |
| **测试目的** | 从用户角度验证系统各项功能是否正常工作 |
| **测试范围** | 系统所有功能模块 |

---

## 一、测试环境准备

### 1.1 系统要求

- **后端服务**：运行在 `http://localhost:8000`
- **前端服务**：运行在 `http://localhost:3000` 或 `http://localhost:5173`
- **浏览器**：Chrome、Firefox、Edge（最新版本）

### 1.2 测试账户

**默认管理员账户**：
- EHR号：`0000001`
- 密码：`admin123`

**测试前准备**：
1. 确保后端服务已启动
2. 确保前端服务已启动
3. 确保数据库已初始化（运行 `python backend/init_db.py`）
4. 准备测试数据（用户、资产等）

---

## 二、管理员功能测试

### 2.1 登录功能测试

#### 测试用例 TC-ADMIN-001：管理员登录

**测试步骤**：
1. 打开浏览器，访问前端地址
2. 在登录页面输入EHR号：`0000001`
3. 验证系统是否显示用户名"系统管理员"
4. 输入密码：`admin123`
5. 点击"登录"按钮

**预期结果**：
- ✅ EHR号验证成功，显示用户名
- ✅ 登录成功，跳转到首页（Dashboard）
- ✅ 页面顶部显示用户名和角色信息
- ✅ 左侧菜单显示所有管理员功能菜单项

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-002：EHR号验证

**测试步骤**：
1. 在登录页面输入不存在的EHR号：`9999999`
2. 观察系统响应

**预期结果**：
- ✅ 显示错误提示："EHR号不存在"
- ✅ 不显示用户名
- ✅ 密码输入框保持可用状态

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-003：密码错误

**测试步骤**：
1. 输入正确的EHR号：`0000001`
2. 输入错误的密码：`wrongpassword`
3. 点击"登录"按钮

**预期结果**：
- ✅ 显示错误提示："密码错误"
- ✅ 停留在登录页面
- ✅ 密码输入框清空

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 2.2 首页统计看板测试

#### 测试用例 TC-ADMIN-004：查看统计数据

**测试步骤**：
1. 以管理员身份登录
2. 进入首页（Dashboard）
3. 查看统计卡片

**预期结果**：
- ✅ 显示"资产总数"卡片，显示正确的数量
- ✅ 显示"在用资产"卡片，显示正确的数量
- ✅ 显示"用户总数"卡片，显示正确的数量
- ✅ 显示"待审批数量"卡片，显示正确的数量（交接+退回+编辑申请）
- ✅ 统计数据实时更新

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 2.3 用户管理功能测试

#### 测试用例 TC-ADMIN-005：查看用户列表

**测试步骤**：
1. 以管理员身份登录
2. 点击左侧菜单"用户管理"
3. 查看用户列表

**预期结果**：
- ✅ 显示所有用户列表
- ✅ 列表包含：EHR号、姓名、组别、角色、创建时间
- ✅ 支持分页显示
- ✅ 支持按组别、角色筛选
- ✅ 支持关键词搜索（EHR号、姓名）

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-006：创建新用户

**测试步骤**：
1. 在用户管理页面点击"新增用户"按钮
2. 填写用户信息：
   - EHR号：`1234567`
   - 姓名：`测试用户`
   - 组别：`第1组`
   - 角色：`user`
   - 密码：`123456`
3. 点击"确定"按钮

**预期结果**：
- ✅ 表单验证通过
- ✅ 创建成功，显示成功提示
- ✅ 用户列表刷新，显示新创建的用户
- ✅ 新用户可以使用该EHR号和密码登录

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-007：编辑用户信息

**测试步骤**：
1. 在用户列表中找到要编辑的用户
2. 点击"编辑"按钮
3. 修改用户信息（如：姓名、组别、角色）
4. 点击"确定"按钮

**预期结果**：
- ✅ 表单预填充用户当前信息
- ✅ 可以修改姓名、组别、角色、密码
- ✅ EHR号不可修改（灰色禁用）
- ✅ 保存成功，显示成功提示
- ✅ 用户列表刷新，显示更新后的信息

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-008：删除用户

**测试步骤**：
1. 在用户列表中找到要删除的用户
2. 点击"删除"按钮
3. 在确认对话框中点击"确定"

**预期结果**：
- ✅ 显示确认对话框
- ✅ 删除成功，显示成功提示
- ✅ 用户从列表中消失
- ✅ 该用户无法再登录系统

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-009：批量导入用户

**测试步骤**：
1. 准备Excel文件，包含用户信息（EHR号、姓名、组别、角色、密码）
2. 在用户管理页面点击"批量导入"按钮
3. 选择Excel文件
4. 点击"上传"按钮

**预期结果**：
- ✅ 显示上传进度
- ✅ 导入完成后显示结果（成功数量、失败数量）
- ✅ 如果有错误，显示错误详情（最多50条）
- ✅ 导入成功的用户出现在用户列表中
- ✅ 重复的EHR号被跳过

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 2.4 资产管理功能测试

#### 测试用例 TC-ADMIN-010：查看资产列表

**测试步骤**：
1. 以管理员身份登录
2. 点击左侧菜单"资产管理"
3. 查看资产列表

**预期结果**：
- ✅ 显示所有资产列表（包括所有用户的资产）
- ✅ 列表包含：资产编号、名称、大类、状态、使用人、存放地点等
- ✅ 支持多条件筛选（资产编号、大类、状态、使用人）
- ✅ 支持关键词搜索
- ✅ 支持分页显示
- ✅ 支持调整列宽

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-011：创建新资产

**测试步骤**：
1. 在资产管理页面点击"新增资产"按钮
2. 填写资产信息：
   - 资产编号：`TEST001`
   - 所属大类：`电子设备配件`
   - 实物名称：`测试主机`
   - 规格型号：`i7-9700`
   - 状态：`在用`
   - MAC地址：`00:11:22:33:44:55`
   - IP地址：`192.168.1.100`
   - 存放办公地点：`办公楼A`
   - 存放楼层：`3楼`
   - 座位号：`A-101`
   - 使用人：选择已存在的用户
   - 备注说明：`测试资产`
3. 点击"确定"按钮

**预期结果**：
- ✅ 表单验证通过（必填项验证）
- ✅ 资产编号唯一性验证通过
- ✅ 创建成功，显示成功提示
- ✅ 资产列表刷新，显示新创建的资产
- ✅ 自动创建资产流转记录（操作类型：create）
- ✅ 使用人组别自动填充

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-012：编辑资产（管理员直接编辑）

**测试步骤**：
1. 在资产列表中找到要编辑的资产
2. 点击"编辑"按钮
3. 修改资产信息（如：MAC地址、IP地址、存放地点）
4. 点击"确定"按钮

**预期结果**：
- ✅ 表单预填充资产当前信息
- ✅ 可以修改所有字段（资产编号不可修改）
- ✅ 保存成功，显示成功提示
- ✅ 资产信息立即更新（无需审批）
- ✅ 自动创建资产流转记录（操作类型：edit）

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-013：删除资产（软删除）

**测试步骤**：
1. 在资产列表中找到要删除的资产
2. 点击"删除"按钮
3. 在确认对话框中点击"确定"

**预期结果**：
- ✅ 显示确认对话框
- ✅ 删除成功，显示成功提示
- ✅ 资产从列表中消失（软删除）
- ✅ 自动创建资产流转记录（操作类型：delete）
- ✅ 资产历史记录仍保留

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-014：查看资产历史记录

**测试步骤**：
1. 在资产列表中找到要查看历史的资产
2. 点击"历史"按钮
3. 查看资产历史记录页面

**预期结果**：
- ✅ 显示资产的完整流转记录
- ✅ 记录按时间倒序排列
- ✅ 使用时间线形式展示
- ✅ 显示操作类型、操作人、操作时间、操作描述
- ✅ 显示变更详情（旧值、新值）
- ✅ 包含所有操作：创建、编辑、交接、退回、审批、删除等

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-015：批量导入资产

**测试步骤**：
1. 准备Excel文件，包含资产信息（资产编号、所属大类、实物名称等）
2. 在资产管理页面点击"批量导入"按钮
3. 选择Excel文件
4. 点击"上传"按钮

**预期结果**：
- ✅ 显示上传进度
- ✅ 导入完成后显示结果（成功数量、失败数量）
- ✅ 如果有错误，显示错误详情（最多50条）
- ✅ 导入成功的资产出现在资产列表中
- ✅ 重复的资产编号被跳过
- ✅ 如果资产大类不存在，系统自动创建
- ✅ 如果使用人EHR号存在，自动匹配用户

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-016：导出资产

**测试步骤**：
1. 在资产管理页面设置筛选条件（可选）
2. 点击"导出"按钮
3. 下载Excel文件

**预期结果**：
- ✅ 导出成功，下载Excel文件
- ✅ 文件包含当前筛选条件下的所有资产
- ✅ 文件包含所有资产字段
- ✅ 文件格式与导入格式一致

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 2.5 资产交接功能测试

#### 测试用例 TC-ADMIN-017：查看交接申请列表

**测试步骤**：
1. 以管理员身份登录
2. 点击左侧菜单"资产交接"
3. 查看交接申请列表

**预期结果**：
- ✅ 显示所有交接申请（包括所有用户的申请）
- ✅ 列表包含：资产信息、转出人、转入人、状态、创建时间等
- ✅ 支持按状态筛选（待确认/待审批/已批准/已拒绝/转入人已拒绝）
- ✅ 支持关键词搜索
- ✅ 支持分页显示

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-018：代为提交交接申请

**测试步骤**：
1. 在资产交接页面点击"申请交接"按钮
2. 选择要交接的资产
3. 选择转入用户
4. 填写交接原因（可选）
5. 点击"提交"按钮

**预期结果**：
- ✅ 只能选择有使用人的资产
- ✅ 不能将资产交接给自己
- ✅ 提交成功，显示成功提示
- ✅ 申请状态为"待转入人确认"（waiting_confirmation）
- ✅ 自动创建资产流转记录（操作类型：transfer）

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 2.6 资产退回功能测试

#### 测试用例 TC-ADMIN-019：查看退回申请列表

**测试步骤**：
1. 以管理员身份登录
2. 点击左侧菜单"资产退回"
3. 查看退回申请列表

**预期结果**：
- ✅ 显示所有退回申请
- ✅ 列表包含：资产信息、退回人、状态、创建时间等
- ✅ 支持按状态筛选
- ✅ 支持关键词搜索
- ✅ 支持分页显示

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 2.7 审批管理功能测试

#### 测试用例 TC-ADMIN-020：查看待审批申请

**测试步骤**：
1. 以管理员身份登录
2. 点击左侧菜单"审批管理"
3. 查看待审批申请列表

**预期结果**：
- ✅ 使用标签页分类显示（交接申请、退回申请、编辑申请）
- ✅ 显示所有待审批的申请
- ✅ 列表显示：申请类型、资产信息、申请人、创建时间等
- ✅ 支持按申请类型筛选
- ✅ 支持关键词搜索
- ✅ 支持分页显示

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-021：审批交接申请（批准）

**前置条件**：
- 存在一个状态为"待审批"（pending）的交接申请（转入人已确认）

**测试步骤**：
1. 在审批管理页面，切换到"交接申请"标签页
2. 找到待审批的交接申请
3. 点击"审批"按钮
4. 选择"批准"
5. 填写审批意见（可选）：`同意交接`
6. 点击"确定"按钮

**预期结果**：
- ✅ 审批成功，显示成功提示
- ✅ 申请状态更新为"已批准"（approved）
- ✅ 资产的使用人更新为转入用户
- ✅ 资产的使用人组别自动更新
- ✅ 自动创建资产流转记录（操作类型：approve）
- ✅ 记录审批人和审批时间

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-022：审批交接申请（拒绝）

**前置条件**：
- 存在一个状态为"待审批"（pending）的交接申请

**测试步骤**：
1. 在审批管理页面，找到待审批的交接申请
2. 点击"审批"按钮
3. 选择"拒绝"
4. 填写审批意见：`不同意交接`
5. 点击"确定"按钮

**预期结果**：
- ✅ 审批成功，显示成功提示
- ✅ 申请状态更新为"已拒绝"（rejected）
- ✅ 资产信息不变（使用人不变）
- ✅ 自动创建资产流转记录（操作类型：approve）
- ✅ 记录审批人和审批时间

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-023：审批退回申请（批准）

**前置条件**：
- 存在一个状态为"待审批"（pending）的退回申请

**测试步骤**：
1. 在审批管理页面，切换到"退回申请"标签页
2. 找到待审批的退回申请
3. 点击"审批"按钮
4. 选择"批准"
5. 填写审批意见（可选）
6. 点击"确定"按钮

**预期结果**：
- ✅ 审批成功，显示成功提示
- ✅ 申请状态更新为"已批准"（approved）
- ✅ 资产的使用人清空（或更新为新保管人，如果申请中有填写）
- ✅ 资产状态变为"库存备用"
- ✅ 更新存放地点等信息（如果申请中有修改）
- ✅ 自动创建资产流转记录（操作类型：approve）

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-024：审批编辑申请（批准）

**前置条件**：
- 存在一个状态为"待审批"（pending）的编辑申请

**测试步骤**：
1. 在审批管理页面，切换到"编辑申请"标签页
2. 找到待审批的编辑申请
3. 点击"审批"按钮
4. 查看修改的字段对比
5. 选择"批准"
6. 填写审批意见（可选）
7. 点击"确定"按钮

**预期结果**：
- ✅ 显示修改的字段对比（旧值、新值）
- ✅ 审批成功，显示成功提示
- ✅ 申请状态更新为"已批准"（approved）
- ✅ 资产的相应字段更新为申请中的值
- ✅ 自动创建资产流转记录（操作类型：edit_approve）

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-025：审批未确认的交接申请（应该失败）

**前置条件**：
- 存在一个状态为"待转入人确认"（waiting_confirmation）的交接申请

**测试步骤**：
1. 在审批管理页面，找到状态为"待转入人确认"的交接申请
2. 尝试点击"审批"按钮（如果显示）

**预期结果**：
- ✅ 如果显示"审批"按钮，点击后应该提示："转入人尚未确认，无法审批"
- ✅ 或者不显示"审批"按钮，只显示"待确认"状态
- ✅ 无法审批未确认的申请

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 2.8 资产大类管理功能测试

#### 测试用例 TC-ADMIN-026：查看资产大类列表

**测试步骤**：
1. 以管理员身份登录
2. 在资产管理页面，查看资产大类下拉列表

**预期结果**：
- ✅ 显示所有资产大类
- ✅ 包含默认大类：办公用品、电子设备配件、家具、其他

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-027：创建资产大类

**测试步骤**：
1. 在资产管理页面，点击"资产大类管理"（如果有）或通过API创建
2. 输入大类名称：`测试大类`
3. 点击"确定"按钮

**预期结果**：
- ✅ 创建成功，显示成功提示
- ✅ 大类名称唯一性验证通过
- ✅ 新大类可以立即在创建资产时使用

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 2.9 安全检查功能测试

#### 测试用例 TC-ADMIN-028：查看检查类型列表

**测试步骤**：
1. 以管理员身份登录
2. 点击左侧菜单"检查类型管理"
3. 查看检查类型列表

**预期结果**：
- ✅ 显示所有检查类型
- ✅ 列表包含：类型名称、描述、检查项数量、状态、创建时间等
- ✅ 支持搜索功能
- ✅ 支持按状态筛选（启用/停用）

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-029：创建检查类型

**测试步骤**：
1. 在检查类型管理页面点击"新增检查类型"按钮
2. 填写检查类型信息：
   - 类型名称：`消防安全检查`
   - 描述：`检查消防设备是否正常`
   - 检查项列表：
     - 检查项1：`灭火器是否在有效期内`（必填）
     - 检查项2：`消防通道是否畅通`（必填）
     - 检查项3：`烟雾报警器是否正常`（可选）
3. 点击"确定"按钮

**预期结果**：
- ✅ 表单验证通过
- ✅ 类型名称唯一性验证通过
- ✅ 可以动态添加/删除检查项
- ✅ 可以设置检查项为必填/可选
- ✅ 创建成功，显示成功提示
- ✅ 检查类型列表刷新，显示新创建的类型

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-030：编辑检查类型

**测试步骤**：
1. 在检查类型列表中找到要编辑的检查类型
2. 点击"编辑"按钮
3. 修改检查类型信息（如：添加检查项、修改描述）
4. 点击"确定"按钮

**预期结果**：
- ✅ 表单预填充当前信息
- ✅ 可以修改所有字段（类型名称可以修改，但需唯一性验证）
- ✅ 保存成功，显示成功提示
- ✅ 检查类型列表刷新，显示更新后的信息

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-031：停用/启用检查类型

**测试步骤**：
1. 在检查类型列表中找到要停用的检查类型
2. 点击"停用"按钮（或编辑时修改状态）
3. 确认停用

**预期结果**：
- ✅ 停用成功，显示成功提示
- ✅ 检查类型状态更新为"停用"
- ✅ 停用的检查类型不能用于新建任务
- ✅ 已存在的任务不受影响

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-032：查看安全检查任务列表

**测试步骤**：
1. 以管理员身份登录
2. 点击左侧菜单"安全检查任务"
3. 查看任务列表

**预期结果**：
- ✅ 显示所有安全检查任务
- ✅ 列表包含：任务编号、标题、检查类型、状态、进度、截止时间等
- ✅ 支持按状态筛选（进行中/已完成/已逾期/已取消）
- ✅ 支持按检查类型筛选
- ✅ 支持关键词搜索
- ✅ 支持分页显示

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-033：创建安全检查任务

**测试步骤**：
1. 在安全检查任务页面点击"发布新任务"按钮
2. 选择检查类型（已启用的类型）
3. 筛选资产（可选：资产编号、大类、状态、使用人）
4. 选择资产（支持批量选择）
5. 设置任务信息：
   - 任务标题：`2025年第一季度消防安全检查`
   - 任务描述：`对所有在用资产进行消防安全检查`
   - 截止时间：`2025-03-31 23:59`（可选）
6. 点击"确认发布"按钮

**预期结果**：
- ✅ 只能选择已启用的检查类型
- ✅ 只能选择有使用人的资产（没有使用人的资产被跳过）
- ✅ 任务自动分配给资产的使用人
- ✅ 生成任务编号（格式：SAFETY-YYYY-NNN）
- ✅ 创建成功，显示成功提示
- ✅ 任务状态为"进行中"（pending）
- ✅ 任务列表刷新，显示新创建的任务

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-034：查看任务详情

**测试步骤**：
1. 在任务列表中找到要查看的任务
2. 点击"查看"按钮
3. 查看任务详情页面

**预期结果**：
- ✅ 显示任务完整信息（标题、类型、描述、状态、进度、截止时间等）
- ✅ 显示任务资产列表（包含：资产编号、名称、使用人、检查状态等）
- ✅ 显示任务进度（已完成/总数）
- ✅ 支持导出任务数据（如果有）

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-ADMIN-035：取消安全检查任务

**测试步骤**：
1. 在任务列表中找到要取消的任务（状态为"进行中"）
2. 点击"取消"按钮
3. 在确认对话框中点击"确定"

**预期结果**：
- ✅ 显示确认对话框
- ✅ 取消成功，显示成功提示
- ✅ 任务状态更新为"已取消"（cancelled）
- ✅ 已完成的检查结果保留

**实际结果**：□ 通过  □ 失败

**备注**：

---

## 三、普通用户功能测试

### 3.1 登录功能测试

#### 测试用例 TC-USER-001：普通用户登录

**前置条件**：
- 已创建普通用户（EHR号：`1234567`，密码：`123456`）

**测试步骤**：
1. 打开浏览器，访问前端地址
2. 在登录页面输入EHR号：`1234567`
3. 验证系统是否显示用户名
4. 输入密码：`123456`
5. 点击"登录"按钮

**预期结果**：
- ✅ EHR号验证成功，显示用户名
- ✅ 登录成功，跳转到首页
- ✅ 页面顶部显示用户名和角色信息
- ✅ 左侧菜单只显示普通用户可访问的功能菜单项
- ✅ 不显示"用户管理"、"审批管理"等管理员功能

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 3.2 首页统计看板测试

#### 测试用例 TC-USER-002：查看统计数据

**测试步骤**：
1. 以普通用户身份登录
2. 进入首页（Dashboard）
3. 查看统计卡片

**预期结果**：
- ✅ 显示统计数据（根据权限可能只显示部分数据）
- ✅ 统计数据准确

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 3.3 资产管理功能测试

#### 测试用例 TC-USER-003：查看自己的资产列表

**测试步骤**：
1. 以普通用户身份登录
2. 点击左侧菜单"资产管理"
3. 查看资产列表

**预期结果**：
- ✅ 只显示当前用户使用的资产
- ✅ 不显示其他用户的资产
- ✅ 列表包含：资产编号、名称、大类、状态、存放地点等
- ✅ 支持筛选和搜索功能
- ✅ 支持分页显示

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-004：创建新资产

**测试步骤**：
1. 在资产管理页面点击"新增资产"按钮
2. 填写资产信息（使用人默认为当前用户）
3. 点击"确定"按钮

**预期结果**：
- ✅ 表单验证通过
- ✅ 创建成功，显示成功提示
- ✅ 资产列表刷新，显示新创建的资产
- ✅ 使用人自动设置为当前用户
- ✅ 使用人组别自动填充

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-005：编辑自己的资产（提交编辑申请）

**前置条件**：
- 当前用户名下有一个资产

**测试步骤**：
1. 在资产列表中找到自己名下的资产
2. 点击"编辑"按钮
3. 修改资产信息（如：MAC地址、IP地址、存放地点）
4. 注意：不能修改使用人
5. 点击"确定"按钮

**预期结果**：
- ✅ 表单预填充资产当前信息
- ✅ 使用人字段不可编辑（灰色禁用）
- ✅ 可以修改其他字段
- ✅ 提交成功，显示成功提示："编辑申请已提交，等待管理员审批"
- ✅ 资产信息不立即更新（等待审批）
- ✅ 自动创建编辑申请记录（状态：pending）
- ✅ 自动创建资产流转记录（操作类型：edit）

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-006：尝试编辑其他用户的资产（应该失败）

**前置条件**：
- 存在其他用户名下的资产

**测试步骤**：
1. 以普通用户身份登录
2. 尝试访问其他用户的资产详情（如果可能）
3. 尝试编辑其他用户的资产

**预期结果**：
- ✅ 在资产列表中看不到其他用户的资产
- ✅ 如果通过其他方式访问，应该提示"无权限"或"资产不存在"
- ✅ 无法编辑其他用户的资产

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-007：查看资产历史记录

**测试步骤**：
1. 在资产列表中找到自己名下的资产
2. 点击"历史"按钮
3. 查看资产历史记录页面

**预期结果**：
- ✅ 显示资产的完整流转记录
- ✅ 记录按时间倒序排列
- ✅ 显示所有操作历史

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 3.4 资产交接功能测试

#### 测试用例 TC-USER-008：查看交接申请列表

**测试步骤**：
1. 以普通用户身份登录
2. 点击左侧菜单"资产交接"
3. 查看交接申请列表

**预期结果**：
- ✅ 只显示自己作为转出人或转入人的申请
- ✅ 列表包含：资产信息、转出人、转入人、状态、创建时间等
- ✅ 支持按状态筛选
- ✅ 支持关键词搜索
- ✅ 支持分页显示

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-009：提交交接申请

**前置条件**：
- 当前用户名下有一个资产

**测试步骤**：
1. 在资产交接页面点击"申请交接"按钮
2. 选择要交接的资产（只能选择自己使用的资产）
3. 选择转入用户
4. 填写交接原因（可选）
5. 点击"提交"按钮

**预期结果**：
- ✅ 只能选择当前用户使用的资产
- ✅ 不能将资产交接给自己
- ✅ 提交成功，显示成功提示
- ✅ 申请状态为"待转入人确认"（waiting_confirmation）
- ✅ 自动创建资产流转记录（操作类型：transfer）

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-010：作为转入人确认交接申请

**前置条件**：
- 存在一个状态为"待转入人确认"的交接申请，当前用户是转入人

**测试步骤**：
1. 在资产交接页面，找到状态为"待转入人确认"的申请
2. 点击"确认"按钮
3. 在确认对话框中选择"确认接收"
4. 填写确认备注（可选）：`确认接收该资产`
5. 点击"确定"按钮

**预期结果**：
- ✅ 确认成功，显示成功提示
- ✅ 申请状态更新为"待审批"（pending）
- ✅ 记录确认时间和确认备注
- ✅ 自动创建资产流转记录

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-011：作为转入人拒绝交接申请

**前置条件**：
- 存在一个状态为"待转入人确认"的交接申请，当前用户是转入人

**测试步骤**：
1. 在资产交接页面，找到状态为"待转入人确认"的申请
2. 点击"确认"按钮
3. 在确认对话框中选择"拒绝接收"
4. 填写拒绝原因（可选）：`不需要该资产`
5. 点击"确定"按钮

**预期结果**：
- ✅ 拒绝成功，显示成功提示
- ✅ 申请状态更新为"转入人已拒绝"（confirmation_rejected）
- ✅ 流程结束，不再需要管理员审批
- ✅ 记录拒绝时间和拒绝原因
- ✅ 自动创建资产流转记录

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-012：撤回交接申请

**前置条件**：
- 当前用户作为转出人，有一个状态为"待转入人确认"或"待审批"的交接申请

**测试步骤**：
1. 在资产交接页面，找到自己的申请
2. 点击"撤回"按钮
3. 在确认对话框中点击"确定"

**预期结果**：
- ✅ 撤回成功，显示成功提示
- ✅ 申请被删除或标记为已撤回
- ✅ 资产状态不变

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-013：尝试确认非自己的交接申请（应该失败）

**前置条件**：
- 存在一个状态为"待转入人确认"的交接申请，当前用户不是转入人

**测试步骤**：
1. 尝试通过某种方式访问该申请
2. 尝试点击"确认"按钮（如果显示）

**预期结果**：
- ✅ 不显示"确认"按钮
- ✅ 或者点击后提示"无权限"或"您不是转入人"
- ✅ 无法确认非自己的申请

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 3.5 资产退回功能测试

#### 测试用例 TC-USER-014：查看退回申请列表

**测试步骤**：
1. 以普通用户身份登录
2. 点击左侧菜单"资产退回"
3. 查看退回申请列表

**预期结果**：
- ✅ 只显示自己的退回申请
- ✅ 列表包含：资产信息、退回人、状态、创建时间等
- ✅ 支持按状态筛选
- ✅ 支持关键词搜索
- ✅ 支持分页显示

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-015：提交退回申请

**前置条件**：
- 当前用户名下有一个资产

**测试步骤**：
1. 在资产退回页面点击"申请退回"按钮
2. 选择要退回的资产（只能选择自己使用的资产）
3. 填写退回原因（可选）
4. 可以修改资产的部分信息（MAC地址、IP地址、存放地点等）
5. 可以选择新保管人（可选）
6. 点击"提交"按钮

**预期结果**：
- ✅ 只能选择当前用户使用的资产
- ✅ 可以修改资产的MAC地址、IP地址、存放地点等信息
- ✅ 可以选择新保管人
- ✅ 提交成功，显示成功提示
- ✅ 申请状态为"待审批"（pending）
- ✅ 自动创建资产流转记录（操作类型：return）

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 3.6 我的检查任务功能测试

#### 测试用例 TC-USER-016：查看我的检查任务列表

**测试步骤**：
1. 以普通用户身份登录
2. 点击左侧菜单"我的检查任务"
3. 查看任务列表

**预期结果**：
- ✅ 只显示分配给当前用户的任务
- ✅ 使用标签页分类显示（待检查、已完成、全部）
- ✅ 列表包含：任务编号、任务标题、检查类型、待检查数量、截止时间等
- ✅ 支持按状态筛选
- ✅ 支持关键词搜索
- ✅ 支持分页显示

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-017：查看任务详情和资产列表

**测试步骤**：
1. 在任务列表中找到要查看的任务
2. 点击"查看详情"或"开始检查"按钮
3. 查看任务详情和资产列表

**预期结果**：
- ✅ 显示任务完整信息（标题、类型、描述、截止时间等）
- ✅ 显示分配给当前用户的资产列表
- ✅ 显示每个资产的检查状态（待检查/已检查）
- ✅ 显示检查类型和检查项列表

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-018：提交检查结果

**前置条件**：
- 存在一个分配给当前用户的待检查资产

**测试步骤**：
1. 在任务详情页面，找到待检查的资产
2. 点击"开始检查"或"填写检查结果"按钮
3. 填写检查项结果：
   - 检查项1：选择结果（通过/不通过/警告），填写备注
   - 检查项2：选择结果，填写备注
   - ...
4. 填写整体检查结果：`通过`
5. 填写检查备注：`所有检查项均正常`
6. 点击"提交检查结果"按钮

**预期结果**：
- ✅ 显示检查类型的所有检查项
- ✅ 必填检查项必须填写结果
- ✅ 可以填写每个检查项的备注
- ✅ 可以填写整体检查结果和备注
- ✅ 提交成功，显示成功提示
- ✅ 资产检查状态更新为"已检查"（checked）
- ✅ 记录检查时间和检查人
- ✅ 创建检查历史记录
- ✅ 任务进度更新

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-019：查看已完成的检查结果

**测试步骤**：
1. 在任务列表中找到已完成的任务
2. 点击"查看详情"按钮
3. 查看已完成的检查结果

**预期结果**：
- ✅ 显示已完成的检查结果
- ✅ 显示检查项结果和备注
- ✅ 显示整体检查结果和备注
- ✅ 显示检查时间和检查人

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-USER-020：尝试提交非自己的检查任务（应该失败）

**前置条件**：
- 存在一个分配给其他用户的检查任务

**测试步骤**：
1. 尝试通过某种方式访问该任务
2. 尝试提交检查结果

**预期结果**：
- ✅ 在任务列表中看不到分配给其他用户的任务
- ✅ 如果通过其他方式访问，应该提示"无权限"
- ✅ 无法提交非自己的检查结果

**实际结果**：□ 通过  □ 失败

**备注**：

---

## 四、边界和异常情况测试

### 4.1 数据验证测试

#### 测试用例 TC-EDGE-001：EHR号格式验证

**测试步骤**：
1. 在创建用户时，输入非7位数字的EHR号（如：`12345`、`12345678`、`abc1234`）
2. 尝试提交

**预期结果**：
- ✅ 显示错误提示："EHR号必须是7位数字"
- ✅ 无法提交

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-EDGE-002：EHR号唯一性验证

**测试步骤**：
1. 尝试创建一个EHR号已存在的用户
2. 尝试提交

**预期结果**：
- ✅ 显示错误提示："EHR号已存在"
- ✅ 无法提交

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-EDGE-003：资产编号唯一性验证

**测试步骤**：
1. 尝试创建一个资产编号已存在的资产
2. 尝试提交

**预期结果**：
- ✅ 显示错误提示："资产编号已存在"
- ✅ 无法提交

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-EDGE-004：必填字段验证

**测试步骤**：
1. 在创建资产时，不填写必填字段（资产编号、所属大类、实物名称）
2. 尝试提交

**预期结果**：
- ✅ 显示错误提示，指出哪些字段是必填的
- ✅ 必填字段高亮显示
- ✅ 无法提交

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 4.2 权限控制测试

#### 测试用例 TC-EDGE-005：普通用户访问管理员功能

**测试步骤**：
1. 以普通用户身份登录
2. 尝试直接访问管理员功能URL（如：`/users`、`/approvals`）
3. 观察系统响应

**预期结果**：
- ✅ 自动跳转到首页或显示"无权限"提示
- ✅ 或者不显示管理员功能菜单项
- ✅ 无法访问管理员功能

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-EDGE-006：未登录用户访问受保护页面

**测试步骤**：
1. 未登录状态下，尝试直接访问受保护页面URL
2. 观察系统响应

**预期结果**：
- ✅ 自动跳转到登录页面
- ✅ 登录后跳转回原页面（如果支持）

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 4.3 业务流程边界测试

#### 测试用例 TC-EDGE-007：交接给自己

**测试步骤**：
1. 在提交交接申请时，选择转入用户为自己
2. 尝试提交

**预期结果**：
- ✅ 显示错误提示："不能将资产交接给自己"
- ✅ 无法提交

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-EDGE-008：交接没有使用人的资产

**测试步骤**：
1. 在提交交接申请时，尝试选择没有使用人的资产（库存备用资产）
2. 观察系统响应

**预期结果**：
- ✅ 不显示没有使用人的资产（或显示但不可选）
- ✅ 或者显示提示："该资产没有使用人，无法交接"

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-EDGE-009：重复确认交接申请

**测试步骤**：
1. 作为转入人，确认一个交接申请
2. 再次尝试确认同一个申请

**预期结果**：
- ✅ 不显示"确认"按钮（或按钮禁用）
- ✅ 或者显示提示："该申请已确认，无法重复确认"

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-EDGE-010：审批已审批的申请

**测试步骤**：
1. 尝试审批一个已批准或已拒绝的申请
2. 观察系统响应

**预期结果**：
- ✅ 不显示"审批"按钮（或按钮禁用）
- ✅ 或者显示提示："该申请已审批，无法重复审批"

**实际结果**：□ 通过  □ 失败

**备注**：

---

### 4.4 数据异常测试

#### 测试用例 TC-EDGE-011：Excel导入格式错误

**测试步骤**：
1. 准备一个格式错误的Excel文件（缺少必填列、数据格式错误等）
2. 尝试批量导入用户或资产

**预期结果**：
- ✅ 显示错误提示，指出格式问题
- ✅ 显示错误详情（最多50条）
- ✅ 格式正确的行正常导入，错误的行被跳过

**实际结果**：□ 通过  □ 失败

**备注**：

---

#### 测试用例 TC-EDGE-012：大量数据测试

**测试步骤**：
1. 导入大量数据（如：1000条资产）
2. 测试列表加载和分页功能

**预期结果**：
- ✅ 导入成功
- ✅ 列表正常加载，支持分页
- ✅ 搜索和筛选功能正常
- ✅ 性能良好，响应时间在可接受范围内

**实际结果**：□ 通过  □ 失败

**备注**：

---

## 五、测试总结

### 5.1 测试执行情况

| 测试类别 | 测试用例数 | 通过数 | 失败数 | 通过率 |
|---------|-----------|--------|--------|--------|
| 管理员功能测试 | 35 | | | |
| 普通用户功能测试 | 20 | | | |
| 边界和异常情况测试 | 12 | | | |
| **总计** | **67** | | | |

### 5.2 发现的问题

#### 严重问题（P1）

| 问题编号 | 问题描述 | 所属模块 | 发现时间 |
|---------|---------|---------|---------|
| | | | |

#### 一般问题（P2）

| 问题编号 | 问题描述 | 所属模块 | 发现时间 |
|---------|---------|---------|---------|
| | | | |

#### 轻微问题（P3）

| 问题编号 | 问题描述 | 所属模块 | 发现时间 |
|---------|---------|---------|---------|
| | | | |

### 5.3 测试结论

**测试环境**：
- 后端版本：
- 前端版本：
- 测试日期：
- 测试人员：

**测试结论**：
- □ 通过：所有功能测试通过，系统可以正常使用
- □ 有条件通过：存在轻微问题，但不影响主要功能使用
- □ 不通过：存在严重问题，需要修复后才能使用

**建议**：
1. 
2. 
3. 

---

## 六、附录

### 6.1 测试数据准备

**测试用户**：
- 管理员：EHR号 `0000001`，密码 `admin123`
- 普通用户1：EHR号 `1234567`，密码 `123456`
- 普通用户2：EHR号 `2345678`，密码 `123456`

**测试资产**：
- 资产编号：`TEST001`，使用人：普通用户1
- 资产编号：`TEST002`，使用人：普通用户2
- 资产编号：`TEST003`，状态：库存备用（无使用人）

### 6.2 测试工具

- 浏览器：Chrome、Firefox、Edge
- 测试数据：Excel文件（用户导入、资产导入）
- API测试工具：Postman（可选）

### 6.3 相关文档

- [README.md](README.md) - 项目说明文档
- [功能需求文档.md](功能需求文档.md) - 功能需求文档
- [FEATURES.md](FEATURES.md) - 功能模块详细说明
- [安全检查功能设计方案.md](安全检查功能设计方案.md) - 安全检查功能设计
- [资产交接转入人确认功能实现说明.md](资产交接转入人确认功能实现说明.md) - 交接确认功能说明

---

**文档版本**：1.0  
**最后更新**：2025年  
**文档状态**：正式版

